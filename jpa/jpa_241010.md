## λ°μ΄ν„° μ ‘κ·Ό ν™μ© κΈ°μ  (JPA)
### `μ—”ν‹°ν‹° λ§¤ν•‘`
JPAλ¥Ό μ‚¬μ©ν•λ” λ° κ°€μ¥ μ¤‘μ”ν• μΌμ€ μ—”ν‹°ν‹°μ™€ ν…μ΄λΈ”μ„ μ •ν™•ν λ§¤ν•‘ν•λ” κ²ƒμ΄λ‹¤. λ‹¤μ–‘ν• `μ–΄λ…Έν…μ΄μ…`μ„ μ κ³µν•λ”λ° ν¬κ² λ‡κ°€μ§€λ΅ λ¶„λ¥ν•  μ μλ‹¤.

- κ°μ²΄μ™€ ν…μ΄λΈ” λ§¤ν•‘ : @Entity, @Table
- κΈ°λ³Έ ν‚¤ λ§¤ν•‘ : @Id
- ν•„λ“μ™€ μ»¬λΌ λ§¤ν•‘ : @Column
- μ—°κ΄€ κ΄€κ³„ λ§¤ν•‘ : @ManyToOne, @JoinColumn

-> κ°μ²΄μ™€ ν…μ΄λΈ” λ§¤ν•‘, κΈ°λ³Έν‚¤ λ§¤ν•‘, ν•„λ“μ™€ μ»¬λΌ λ§¤ν•‘ μ–΄λ…Έν…μ΄μ…μ„ μ‘μ„±ν–μ„ λ• JPAλ” λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§λ¥Ό μλ™μΌλ΅ μƒμ„±ν•λ” κΈ°λ¥μ„ μ§€μ›ν•λ‹¤.

<br>

#### 1. κ°μ²΄μ™€ ν…μ΄λΈ” λ§¤ν•‘
JPAλ¥Ό μ‚¬μ©ν•΄μ„ ν…μ΄λΈ”κ³Ό λ§¤ν•‘ν•  ν΄λμ¤λ” `@Entity`λ¥Ό ν•„μλ΅ λ¶™μ—¬μ•Ό λλ‹¤. μ΄ μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ ν΄λμ¤λ” JPAκ°€ κ΄€λ¦¬ν•λ” ν…μ΄λΈ”μ΄ λκ³  JPAλ” μ΄ μ–΄λ…Έν…μ΄μ… μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§λ¥Ό μλ™μΌλ΅ μƒμ„±ν•λ‹¤.

### `@Entity` μ†μ„±

| μ†μ„± | κΈ°λ¥ | κΈ°λ³Έκ°’ |
| --- | --- | --- |
| name | JPAμ—μ„ μ‚¬μ©ν•  μ—”ν‹°ν‹° μ΄λ¦„ μ§€μ •. λ³΄ν†µ κΈ°λ³Έκ°’μΈ ν΄λμ¤ μ΄λ¦„μ„ μ‚¬μ©ν•λ‹¤. λ§μ•½ λ‹¤λ¥Έ ν¨ν‚¤μ§€μ— μ΄λ¦„μ΄ κ°™μ€ μ—”ν‹°ν‹° ν΄λμ¤κ°€ μλ‹¤λ©΄ μ΄λ¦„μ„ μ§€μ •ν•΄μ„ μ¶©λν•μ§€ μ•λ„λ΅ ν•΄μ•Ό ν•λ‹¤.  | μ„¤μ •ν•μ§€ μ•μΌλ©΄ ν΄λμ¤ μ΄λ¦„μ„ κ·Έλ€λ΅ μ‚¬μ©ν•λ‹¤. (μ: Member) |

<br>

### `@Table` λ§¤ν•‘

@Table μ–΄λ…Έν…μ΄μ…μ€ μ—”ν‹°ν‹°μ™€ λ§¤ν•‘ν•  ν…μ΄λΈ”μ„ μ§€μ •ν•λ‹¤.

| μ†μ„± | κΈ°λ¥ | κΈ°λ³Έκ°’ |
| --- | --- | --- |
| name | λ§¤ν•‘ν•  ν…μ΄λΈ” μ΄λ¦„ | μ—”ν‹°ν‹° μ΄λ¦„μ„ μ‚¬μ© |

```java
// νμ› μ—”ν‹°ν‹° ν΄λμ¤
import javax.persistence.*;
import java.util.Date;

@Entity
@Table(name = "member")
public class Member {
    @Id
    @Column(name = "id")
    private String id;

    @Column(name = "name" columnDefinition="varchar(255)")
    private String userName;
    
    @Column(name = "description", columnDefinition="text")
    private String description;

    private Integer age;
    @Column(name = "is_delete", columnDefinition="tinyint(1)")
    private Boolean isDelete; // true, false, tinyint(1) 0, 1
}
```
-> `@Entity`λ” μ΄ ν΄λμ¤κ°€ μ—”ν‹°ν‹°μ„μ„ λ‚νƒ€λ‚΄κ³ , `@Table`μ€ μ΄ μ—”ν‹°ν‹°κ°€ μ–΄λ–¤ ν…μ΄λΈ”κ³Ό λ§¤ν•‘λ μ§€ κµ¬μ²΄μ μΌλ΅ μ„¤μ •ν•  λ• μ‚¬μ©

<br>

#### 2. κΈ°λ³Έ ν‚¤ λ§¤ν•‘
JPAμ—μ„μ κΈ°λ³Έν‚¤λ” `@Id` μ–΄λ…Έν…μ΄μ…μΌλ΅ μ§€μ •ν•λ©° λ°μ΄ν„°λ² μ΄μ¤μ—μ„μ `Primary Key`μ™€ λ™μΌν• μλ―Έλ΅ μ‚¬μ©ν•λ‹¤. JPAλ” μ—¬λ¬κ°€μ§€ λ°©λ²•μΌλ΅ κΈ°λ³Έν‚¤λ¥Ό λ§¤ν•‘ν•  μ μλ„λ΅ μ§€μ›ν•λ‹¤. 

```java
@Entity
public class Member {

		@Id
		@Column(name = "ID")
		private String id;
		
		...
}
```
- μ§μ ‘ ν• λ‹Ή : κΈ°λ³Έν‚¤λ¥Ό μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ μ§μ ‘ ν• λ‹Ήν•©λ‹λ‹¤.
- μλ™ μƒμ„± : λ€λ¦¬ ν‚¤ μ‚¬μ©λ°©μ‹
    - IDENTITY : κΈ°λ³Έ ν‚¤ μƒμ„±μ„ λ°μ΄ν„°λ² μ΄μ¤μ— μ„μ„ν•λ‹¤.
    - SEQUENCE : λ°μ΄ν„°λ² μ΄μ¤ μ‹ν€€μ¤λ¥Ό μ‚¬μ©ν•΄μ„ κΈ°λ³Έ ν‚¤λ¥Ό ν• λ‹Ήν•λ‹¤.
    - TABLE : ν‚¤ μƒμ„± ν…μ΄λΈ”μ„ μ‚¬μ©ν•λ‹¤.
```java
@Entity
public class Member {

		@Id
		@GeneratedValue(strategy = GenerationType.IDENTITY)
		private Long id;
		
		...
}
```

### π’΅μ‹λ³„μ μ„ νƒ μ „λµ

λ°μ΄ν„°λ² μ΄μ¤ κΈ°λ³Έ ν‚¤(Primary Key)λ” λ‹¤μκ³Ό κ°™μ€ μ΅°κ±΄μ„ λ¨λ‘ λ§μ΅±ν•΄μ•Ό ν•λ‹¤.

1. nullμ΄ μ•„λ‹ κ°’
2. μ¤‘λ³µλμ§€ μ•λ”, μ μΌν• κ°’ 
3. λ³€ν•λ©΄ μ•λλ” κ°’

<br>

#### 3. ν•„λ“μ™€ μ»¬λΌ λ§¤ν•‘
JPAκ°€ μ κ³µν•λ” ν•„λ“μ™€ μ»¬λΌ λ§¤ν•‘μ© μ–΄λ…Έν…μ΄μ…λ“¤μ„ μ •λ¦¬ν•΄λ³΄μ•λ‹¤.

| λ§¤ν•‘ μ–΄λ…Έν…μ΄μ… | μ„¤λ… |
| --- | --- |
| @Column | μ»¬λΌ λ§¤ν•‘ |
| @Enumerated | μλ°”μ enum νƒ€μ… λ§¤ν•‘ |
| @Temporal | λ‚ μ§ νƒ€μ… λ§¤ν•‘ |

<br>

### `@Column`

κ°μ²΄ ν•„λ“λ¥Ό ν…μ΄λΈ” μ»¬λΌμ— λ§¤ν•‘ν•λ” μ–΄λ…Έν…μ΄μ…μ΄λ‹¤. κ°€μ¥ λ§μ΄ μ‚¬μ©λκ³  κΈ°λ¥λ„ λ§μ€λ°, μ†μ„±μ¤‘μ— `name`, `nullable`μ΄ μ£Όλ΅ μ‚¬μ©λκ³  λ‚λ¨Έμ§€λ” μ μ‚¬μ©λμ§€ μ•λ” νΈμ΄λ‹¤.

```java
@Entity
public class Member {

		@Id
		@Column(name = "ID")
		private String id;
		
		@Column(name = "NAME", nullable = false, length = 10)
		private String name;
		...
}
```

| μ†μ„± | κΈ°λ¥ | κΈ°λ³Έκ°’ |
| --- | --- | --- |
| name | ν•„λ“μ™€ λ§¤ν•‘ν•  ν…μ΄λΈ”μ μ»¬λΌ μ΄λ¦„ (μ„¤μ •ν•μ§€ μ•μΌλ©΄ ν•„λ“ μ΄λ¦„μΌλ΅ μ§€μ •)| κ°μ²΄μ ν•„λ“ μ΄λ¦„ |
| nullable | nullκ°’μ ν—μ© μ—¬λ¶€ μ„¤μ •. falseλ΅ ν•λ©΄ DDL μ„¤μ •μ‹μ— not null μ μ•½μ΅°κ±΄μ΄ λ¶™λ”λ‹¤ | true |
| unique | @Tableμ uniqueConstraintsμ™€ κ°™μ§€λ§ ν• μ»¬λΌμ— κ°„λ‹¨ν μ λ‹ν¬ μ μ•½μ΅°κ±΄μ„ κ±Έ λ• μ‚¬μ©ν•λ‹¤. λ§μ•½ λ‘ μ»¬λΌ μ΄μƒμ„ μ‚¬μ©ν•΄μ„ μ λ‹ν¬ μ μ•½μ΅°κ±΄μ„ μ‚¬μ©ν•λ ¤λ©΄ ν΄λμ¤ λ λ²¨μ—μ„ @Table.uniqueConstraintsλ¥Ό μ‚¬μ©ν•΄μ•Όν•λ‹¤.  |  |
| columnDefinition  | λ°μ΄ν„°λ² μ΄μ¤ μ»¬λΌ μ •λ³΄λ¥Ό μ§μ ‘ μ„¤μ •ν•  μ μλ‹¤. |  |

<br>

### `@Enumerated`

μλ°” enum νƒ€μ…μ μƒμκ°’μ„ ν…μ΄λΈ” μ»¬λΌμ— λ§¤ν•‘ν•λ” μ–΄λ…Έν…μ΄μ…μ΄λ‹¤.

```java
// νμ› μ—”ν‹°ν‹° ν΄λμ¤
import javax.persistence.*;
import java.util.Date;

@Entity
@Table(name = "member")
public class Member {
    @Id
    @Column(name = "id")
    private String id;

    @Column(name = "name")
    private String userName;

    @Column(name = "name")
    private Integer age;

    // Enumerated μ–΄λ…Έν…μ΄μ… μ¶”κ°€ 
    @Enumerated(EnumType.STRING)
    private RoleType roleType;

    @Temporal(TemporalType.TIMESTAMP)
    private Date createAt;
}
```

- EnumType.STRINGμ€ enum μ΄λ¦„ κ·Έλ€λ΅ ADMINμ€ β€ADMINβ€™, USERλ” β€USERβ€™ λΌλ” λ¬Έμλ΅ λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥λ©λ‹λ‹¤.
- EnumType.ORDINALμ€ enumμ— μ •μλ μμ„λ€λ΅ ADMINμ€ 0, USERλ” 1 κ°’μ΄ λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥λ©λ‹λ‹¤.

<br>

### `@Temporal`

λ‚ μ§ νƒ€μ…(java.util.Date, java.util.Calandar)μ„ λ§¤ν•‘ν•  λ• μ‚¬μ©ν•λ‹¤. μ–΄λ…Έν…μ΄μ…μ μ†μ„±μΌλ΅ λ‹¤μμ μ„Έκ°€μ§€ κ°’ μ¤‘ ν•λ‚λ¥Ό μ„¤μ •ν•΄μ•Ό ν•λ‹¤.

- TemporalType.DATE : λ‚ μ§, λ°μ΄ν„°λ² μ΄μ¤ date νƒ€μ…κ³Ό λ§¤ν•‘ (μ: 2024-06-01)
- TemporalType.TIME : μ‹κ°„, λ°μ΄ν„°λ² μ΄μ¤ time νƒ€μ…κ³Ό λ§¤ν•‘ (μ: 01:55:11)
- TemporalType.TIMESTAMP : λ‚ μ§μ™€ μ‹κ°„, λ°μ΄ν„°λ² μ΄μ¤ timestamp νƒ€μ…κ³Ό λ§¤ν•‘(μ: 2024-06-01 01:55:11)